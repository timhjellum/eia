define("animatedComponent",["classy"],function(Class){return Class.$extend({__init__:function(){this.animation={enabled:!1,stepSize:1e3,iteration:0,interval:null}},update:function(animation){$.extend(this.animation,animation)},play:function(loop,stepSize){var self=this,animate=function(){var iteration;self.animation.maxIteration&&(loop?iteration=self.animation.iteration%self.animation.maxIteration:(iteration=Math.min(self.animation.iteration,self.animation.maxIteration),iteration==self.animation.maxIteration&&self.stop())),self.animation.callback&&self.animation.callback.call(self,iteration);if(self.animation.maxIteration===void 0||iteration+1<=self.animation.maxIteration)self.animation.iteration=iteration+1};this.animation.interval&&this.stop(),animate(),this.animation.interval=setInterval(animate,stepSize||this.animation.stepSize)},stop:function(){clearInterval(this.animation.interval),this.animation.interval=null},reset:function(iteration){this.animation.iteration=Math.min(iteration,this.animation.maxIteration),this.animation.callback&&this.animation.callback.call(this,iteration)},destroy:function(){this.stop()}})})