/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("text",["module"],function(module){var text,fs,Cc,Ci,xpcIsWindows,progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation=typeof location!="undefined"&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||undefined),buildMap={},masterConfig=module.config&&module.config()||{};text={version:"2.0.10",strip:function(content){if(content){content=content.replace(xmlRegExp,"");var matches=content.match(bodyRegExp);matches&&(content=matches[1])}else content="";return content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:masterConfig.createXhr||function(){var xhr,i,progId;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(i=0;i<3;i+=1){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}return xhr},parseName:function(name){var modName,ext,temp,strip=!1,index=name.indexOf("."),isRelative=name.indexOf("./")===0||name.indexOf("../")===0;return index!==-1&&(!isRelative||index>1)?(modName=name.substring(0,index),ext=name.substring(index+1,name.length)):modName=name,temp=ext||modName,index=temp.indexOf("!"),index!==-1&&(strip=temp.substring(index+1)==="strip",temp=temp.substring(0,index),ext?ext=temp:modName=temp),{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var uProtocol,uHostName,uPort,match=text.xdRegExp.exec(url);return match?(uProtocol=match[2],uHostName=match[3],uHostName=uHostName.split(":"),uPort=uHostName[1],uHostName=uHostName[0],(!uProtocol||uProtocol===protocol)&&(!uHostName||uHostName.toLowerCase()===hostname.toLowerCase())&&(!uPort&&!uHostName||uPort===port)):!0},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content,masterConfig.isBuild&&(buildMap[name]=content),onLoad(content)},load:function(name,req,onLoad,config){if(config.isBuild&&!config.inlineText){onLoad();return}masterConfig.isBuild=config.isBuild;var parsed=text.parseName(name),nonStripName=parsed.moduleName+(parsed.ext?"."+parsed.ext:""),url=req.toUrl(nonStripName),useXhr=masterConfig.useXhr||text.useXhr;if(url.indexOf("empty:")===0){onLoad();return}!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)?text.get(url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){onLoad.error&&onLoad.error(err)}):req([nonStripName],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed.strip,content,onLoad)})},write:function(pluginName,moduleName,write,config){if(buildMap.hasOwnProperty(moduleName)){var content=text.jsEscape(buildMap[moduleName]);write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n")}},writeFile:function(pluginName,moduleName,req,write,config){var parsed=text.parseName(moduleName),extPart=parsed.ext?"."+parsed.ext:"",nonStripName=parsed.moduleName+extPart,fileName=req.toUrl(parsed.moduleName+extPart)+".js";text.load(nonStripName,req,function(value){var textWrite=function(contents){return write(fileName,contents)};textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,fileName,contents)},text.write(pluginName,nonStripName,textWrite,config)},config)}};if(masterConfig.env==="node"||!masterConfig.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])fs=require.nodeRequire("fs"),text.get=function(url,callback,errback){try{var file=fs.readFileSync(url,"utf8");file.indexOf("ï»¿")===0&&(file=file.substring(1)),callback(file)}catch(e){errback(e)}};else if(masterConfig.env==="xhr"||!masterConfig.env&&text.createXhr())text.get=function(url,callback,errback,headers){var xhr=text.createXhr(),header;xhr.open("GET",url,!0);if(headers)for(header in headers)headers.hasOwnProperty(header)&&xhr.setRequestHeader(header.toLowerCase(),headers[header]);masterConfig.onXhr&&masterConfig.onXhr(xhr,url),xhr.onreadystatechange=function(evt){var status,err;xhr.readyState===4&&(status=xhr.status,status>399&&status<600?(err=new Error(url+" HTTP status: "+status),err.xhr=xhr,errback(err)):callback(xhr.responseText),masterConfig.onXhrComplete&&masterConfig.onXhrComplete(xhr,url))},xhr.send(null)};else if(masterConfig.env==="rhino"||!masterConfig.env&&typeof Packages!="undefined"&&typeof java!="undefined")text.get=function(url,callback){var stringBuffer,line,encoding="utf-8",file=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),encoding)),content="";try{stringBuffer=new java.lang.StringBuffer,line=input.readLine(),line&&line.length()&&line.charAt(0)===65279&&(line=line.substring(1)),line!==null&&stringBuffer.append(line);while((line=input.readLine())!==null)stringBuffer.append(lineSeparator),stringBuffer.append(line);content=String(stringBuffer.toString())}finally{input.close()}callback(content)};else if(masterConfig.env==="xpconnect"||!masterConfig.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)Cc=Components.classes,Ci=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),xpcIsWindows="@mozilla.org/windows-registry-key;1"in Cc,text.get=function(url,callback){var inStream,convertStream,fileObj,readData={};xpcIsWindows&&(url=url.replace(/\//g,"\\")),fileObj=new FileUtils.File(url);try{inStream=Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream),inStream.init(fileObj,1,0,!1),convertStream=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream),convertStream.init(inStream,"utf-8",inStream.available(),Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),convertStream.readString(inStream.available(),readData),convertStream.close(),inStream.close(),callback(readData.value)}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}};return text}),define("text!/global/scripts/modules/src/timeSlider/time_slider.html",[],function(){return'<div id="timeSliderContainer">\r\n	<div class="labelContainer"></div>\r\n	<div class="timeSlider{{#selectDateRange}} range{{/selectDateRange}}"></div>\r\n</div>'}),define("timeSlider",["signals","classy","text!/global/scripts/modules/src/timeSlider/time_slider.html","dateCodeUtils","mustache"],function(signals,Class,timeSliderTemplate,dateCodeUtils){return Class.$extend({sliderType:null,timeSelectionChanged:null,suppressSignals:!1,isCreated:!1,timeSlider:null,lowLabel:null,highLabel:null,lowHandle:null,highHandle:null,values:null,highVal:null,lowVal:null,freq:null,__init__:function(container){this.container=container,this.timeSelectionChanged=new signals.Signal},create:function(config,freq,values,lowVal,highVal){var self=this;this.freq=freq.toUpperCase(),this.values=values,this.lowVal=lowVal,this.highVal=highVal,this.container.html(Mustache.render(timeSliderTemplate,config)),this.timeSlider=$(".timeSlider",this.container),this.sliderType=this.timeSlider.hasClass("range")?this.$class.RANGE_SLIDER:this.$class.SINGLE_SLIDER,this.createSlider(),this.isCreated=!0,this.updateTimeSelection(freq,values,lowVal,highVal)},createSlider:function(){var self=this,slide,change,range;switch(this.sliderType){case this.$class.RANGE_SLIDER:slide=function(event,ui){var step;return ui.values[0]>=ui.values[1]||ui.values[0]<0||ui.values[0]>self.values.length||ui.values[1]<0||ui.values[1]>self.values.length?!1:(self.lowVal=self.values[ui.values[0]],self.highVal=self.values[ui.values[1]],self.updateLabel(!0),self.updateLabel(!1),!0)},change=function(event,ui){self.lowVal=ui.values[0]<0||ui.values[0]>self.values.length?self.values[0]:self.values[ui.values[0]],self.highVal=ui.values[1]<0||ui.values[1]>self.values.length?self.values[self.values.length-1]:self.values[ui.values[1]],self.updateLabel(!0),self.updateLabel(!1),self.suppressSignals||self.timeSelectionChanged.dispatch(self.lowVal,self.highVal)},range=!0;break;case this.$class.SINGLE_SLIDER:slide=function(event,ui){return self.lowVal=self.values[ui.value],self.updateLabel(!0),!0},change=function(event,ui){self.lowVal=self.values[ui.value],self.updateLabel(!0),self.suppressSignals||self.timeSelectionChanged.dispatch(self.lowVal)},range=!1}this.timeSlider.slider({orientation:"horizontal",slide:slide,change:change,range:range});var handles=this.timeSlider.children(".ui-slider-handle");this.lowHandle=handles.eq(0),this.highHandle=handles.eq(1),this.lowLabel=$('<div class="time_slider_tooltip"></div>').append("<span/>").css({position:"absolute"}),this.sliderType===this.$class.SINGLE_SLIDER?this.lowLabel.appendTo(this.lowHandle):(this.highLabel=$('<div class="time_slider_tooltip"></div>').append("<span/>"),this.lowLabel.appendTo(this.timeSlider),this.highLabel.appendTo(this.timeSlider),this.lowLabel.css({left:0}),this.highLabel.css({position:"absolute"})),this.updateLabel(!0),this.updateLabel(!1);switch(this.sliderType){case this.$class.RANGE_SLIDER:this.lowHandle.add(this.highHandle).addClass("dual_slider_handle");break;case this.$class.SINGLE_SLIDER:this.lowHandle.addClass("single_slider_handle")}},updateTimeSelection:function(freq,values,lowVal,highVal){this.suppressSignals=!0,this.values=values,this.freq=freq,this.lowVal=lowVal,this.highVal=highVal,this.updateTimeSlider(),this.suppressSignals=!1},updateLabel:function(low){var label=low?this.lowLabel:this.highLabel;if(label&&label.length>0){var value=low?this.lowVal:this.highVal,handle=low?this.lowHandle:this.highHandle,span=label.find("span");span.text(this.formatLabel(value)),this.sliderType===this.$class.SINGLE_SLIDER?label.css({left:-0.5*span.width()+.5*handle.width()}):low||label.css({left:this.timeSlider.width()-span.width()})}},updateTimeSlider:function(){this.timeSlider.slider("option",{min:0,max:this.values.length-1});switch(this.sliderType){case this.$class.RANGE_SLIDER:this.timeSlider.slider("option",{values:[$.inArray(this.lowVal,this.values),$.inArray(this.highVal,this.values)]});break;case this.$class.SINGLE_SLIDER:this.timeSlider.slider("option",{value:$.inArray(this.lowVal,this.values)})}},formatLabel:function(value){return dateCodeUtils.formatDateCode(value,this.freq)},__classvars__:{RANGE_SLIDER:"rangeSlider",SINGLE_SLIDER:"singleSlider"}})})