define("queryRouter",["hasher","classy"],function(hasher,Class){return Class.$extend({__init__:function(page){var self=this;this.page=page,this.handleHashChange=function(hash){var query=self.$class.decodeQuery(hash);self.page.load(query)},hasher.prependHash="?",hasher.changed.add(this.handleHashChange),hasher.initialized.add(this.handleHashChange),hasher.init()},__classvars__:{decodeQuery:function(queryString){var queryArr=(queryString||"").split("&"),n=queryArr.length,queryObj,value,key;while(n--)queryObj||(queryObj={}),queryArr[n]=queryArr[n].split("="),value=queryArr[n][1],queryObj[queryArr[n][0]]=decodeURIComponent(value);return queryObj}}})})