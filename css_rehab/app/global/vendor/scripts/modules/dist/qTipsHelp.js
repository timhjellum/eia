define("qTipsHelp",["classy","signals","qtips"],function(Class,signals){return Class.$extend({__init__:function(){var self=this;this.tooltipsShown=!1,this.button=$("#help_button"),this.helpButtonClicked=new signals.Signal,this.button.click(function(e){self.button.hasClass("disabled")||self.helpButtonClicked.dispatch()}),this.windowMouseDownHandler=function(e){var isButton=function(buttonEle){var ele=e.target;while(ele.parentNode){if(ele.parentNode==buttonEle)return!0;ele=ele.parentNode}return!1}(self.button.get(0));self.tooltipsShown&&!isButton&&self.hideHelpTooltips()}},toggleHelpTooltips:function(qtips){this.tooltipsShown?this.hideHelpTooltips():this.showHelpTooltips(qtips)},showHelpTooltips:function(qtips){var self=this;this.button.css("cursor","wait").addClass("selected");for(var i=0;i<qtips.length;i++){var target=typeof qtips[i].selector=="function"?qtips[i].selector():$(qtips[i].selector);$.each($(target),function(index,item){$(item).is(":visible")&&($(item).attr("class",$(item).attr("class")+" help_target"),$(item).qtip({content:{prerender:!0,text:qtips[i].tip},show:"null",hide:"null",style:{tip:!0,name:"cream",width:qtips[i].width?qtips[i].width:250},position:{corner:{target:qtips[i].position,tooltip:self.$class.qtipsOpposite[qtips[i].position]},adjust:{x:qtips[i].xAdjust?qtips[i].xAdjust:0,y:qtips[i].yAdjust?qtips[i].yAdjust:0}}}))})}$(".help_target").qtip("show"),this.button.css("cursor","default"),$("body").width(Math.max($(window).width(),1600)).mousedown(this.windowMouseDownHandler),$(window).scrollLeft(($("body").width()-$(window).width())/2).resize(),this.tooltipsShown=!0},hideHelpTooltips:function(){this.button.removeClass("selected"),$(".qtip iframe").hide(),$(".help_target").removeClass("help_target").qtip("destroy"),$("body").width("100%").scroll().unbind("mousedown",this.windowMouseDownHandler),this.tooltipsShown=!1,$(window).resize()},__classvars__:{qtipsOpposite:{topLeft:"bottomRight",topMiddle:"bottomMiddle",topRight:"bottomLeft",bottomLeft:"topRight",bottomMiddle:"topMiddle",bottomRight:"topLeft",leftTop:"rightBottom",leftMiddle:"rightMiddle",leftBottom:"rightTop",rightTop:"leftBottom",rightMiddle:"leftMiddle",rightBottom:"leftTop",center:"center"}}})})